<!-- kommentar -->
<SCRIPT type="text/javascript">
 
function changeNumPersons() {
	var numPersons = document.getElementById('numPersons');
	
	alert(numPersons.selectedIndex);
}

// Legg til beboer (inhabitant)
function addInhabitant()
{
	var inhabitantsAgeOpt = document.getElementById('tmpInhabAge');
	var inhabitantsWorkOpt = document.getElementById('tmpInhabWork');

	addInhabitantHelper(inhabitantsAgeOpt.options[inhabitantsAgeOpt.selectedIndex].value
						,inhabitantsWorkOpt.options[inhabitantsWorkOpt.selectedIndex].value
						);
	
	return false;
}

function addInhabitantHelper(ageId, workId)
{
	if ( ageId < 0 )
	{
		alert('Du må velge alder');
		return false;
	}
	
	if ( workId < 0 )
	{
		alert('Du må velge yrke');
		return false;
	}
	
	var inhabitantsAgeOpt = document.getElementById('tmpInhabAge');
	var inhabitantsWorkOpt = document.getElementById('tmpInhabWork');
	var inhabitantsAgeArr = document.getElementsByName('inhabitantsAge[]');
	
	if ( inhabitantsAgeArr == null )
	{
		return false;
	}
	
	var i = inhabitantsAgeArr.length;

	var newDiv = document.createElement("div");
	newDiv.id = 'inhabitant' + i;	
	
	var work = '';
	
	for ( j=0; j<inhabitantsWorkOpt.length; j++ )
	{
		if ( inhabitantsWorkOpt.options[j].value == workId )
		{
			work = inhabitantsWorkOpt.options[j].innerHTML;
		}
	}
	
	newDiv.innerHTML = 'Alder: ' + ageId
						+ '<input type="hidden" name="inhabitantsAge[]"'
						+ ' value="' + ageId + '" />' 
						+ '<input type="hidden" name="inhabitantsWork[]"'
						+ ' value="' + workId + '" />' 
						+ ' Yrke: ' + work
						+ '&nbsp;<input class="javaButton" type="image" src="gfx/16x16_redcross.png" value="fjern" onclick="javascript:removeTag(\'' + newDiv.id + '\');" />'
						;
						
	document.getElementById("myInhabitants").appendChild(newDiv);	
}

// Fjern beboer (inhabitant)
function removeTag(divid)
{
	var removeTag = document.getElementById(divid);
	removeTag.parentNode.removeChild(removeTag);
}

</SCRIPT>
<div>
	<img class="logo" src="gfx/logo.png" />
	
	<!-- Formen -->
	<form method="post" action="{$scriptURL}">
		<label>Type byggning</label><br />
		<select name="byggType">
			<option value="enebolig">Enebolig</option>
			<option value="leilighet">to be specified</option>
			<option value="rekkehus">to be specified</option>
		</select><br />
	
		<label>Alder:</label>
		<select id="tmpInhabAge" name="tmpInhabAge">
		<option value="-1">Velg alder</option>
		{for $i=0 to 120}
			<option value="{$i}">{$i}</option>
		{/for}
		</select>

		<label>Yrke:</label>
		
		<select name="tmpInhabWork" id="tmpInhabWork">
   			{html_options options=$inhabitantWorkTypesArr}
		</select>
		
		<input type="image" onClick="addInhabitant(); return false;" src="gfx/16x16_addplus.png" class="javaButton" />
		<!-- <input type="image" onClick="return false;" src="gfx/16x16_redcross.png" class="javaButton" /> -->
		
		<br />
		<div id="myInhabitants">
		
		</div>
		
		<!-- Beboere ferdig -->
		<label>Bygge&aring;r</label><br />
	
		<select name="byggaar">
			<option value="for87">F&oslash;r 1987</option>
			<option value="87-97">Mellom 1987 og 1997</option>
			<option value="etter97">Etter 1997</option>
		</select><br />
		
		<!-- Husets størrelse -->
		<label>Boenhet: Brutto Areal</label><br />
		<input type="text" name="houseTotalArea" value="{$enegrySimulator->_houseTotalArea}" /><br />
	
		<label>Boenhet: P-Rom</label><br />
		<input type="text" name="housePrimaryArea" value="{$enegrySimulator->_housePrimaryArea}" /><br />
	
	    <label>Klima</label><br />
		<select name="klima">
			<option value="5,37">S&oslash;r-Norge, kyst</option>
			<option value="7,08">S&oslash;r-Norge, innland</option>
			<option value="8,79">S&oslash;r-Norge, h&oslash;yfjell</option>
			<option value="6,05">Midt-Norge, kyst</option>
			<option value="9,02">Midt-Norge, innland</option>
			<option value="8,11">Nord-Norge, kyst</option>
			<option value="10,82">Finnmark og innland Troms</option>
		</select><br /><br />
		
	
		<input type="hidden" name="function" value="{$function}" />
		{Base::getTokenforFORM("setupSimulator")}
		<input type='submit' class="button" value='Beregn' />
		<a href="{$scriptURL}?function=showWizHeat">
		<input type="button" class="button" value='Neste -> Oppvarming' />
		</a>

	</form>
	
	
{if isset($enegrySimulator) && intval($enegrySimulator->getEnergyUsage()) > 0}
	<h3>Resultat</h3>{$enegrySimulator->getEnergyUsage()} kWh i &aring;ret.	
{/if}
</div>

<SCRIPT type="text/javascript">

{if count($enegrySimulator->_inhabitantsWork) > 0 }
	{for $i=0 to (count($enegrySimulator->_inhabitantsWork) - 1)}
		addInhabitantHelper({$enegrySimulator->_inhabitantsAge[$i]}, {$enegrySimulator->_inhabitantsWork[$i]});
	{/for}
{/if}

</SCRIPT>
